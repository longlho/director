!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Router=t()}}(function(){return function t(e,r,n){function i(s,h){if(!r[s]){if(!e[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var r=e[s][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e){function r(){return""===i.hash||"#"===i.hash}var n=t("./router").Router,i=document.location,o={mode:"modern",hash:i.hash,history:!1,check:function(){var t=i.hash;t!=this.hash&&(this.hash=t,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,e){function r(t){for(var e=0,r=h.listeners.length;r>e;e++)h.listeners[e](t)}var n=this;if(this.history=e,h.listeners||(h.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=r},500):window.onhashchange=r,this.mode="modern";else{var i=document.createElement("iframe");i.id="state-frame",i.style.display="none",document.body.appendChild(i),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&n.check()}),window.setInterval(function(){n.check()},50),this.onHashChanged=r,this.mode="legacy"}return h.listeners.push(t),this.mode},destroy:function(t){if(h&&h.listeners)for(var e=h.listeners,r=e.length-1;r>=0;r--)e[r]===t&&e.splice(r,1)},setHash:function(t){return"legacy"===this.mode&&this.writeFrame(t),this.history===!0?(window.history.pushState({},document.title,t),this.fire()):i.hash="/"===t[0]?t:"/"+t,this},writeFrame:function(t){var e=document.getElementById("state-frame"),r=e.contentDocument||e.contentWindow.document;r.open(),r.write("<script>_hash = '"+t+"'; onload = parent.listener.syncHash;<script>"),r.close()},syncHash:function(){var t=this._hash;return t!=i.hash&&(i.hash=t),this},onHashChanged:function(){}},h=e.exports=function(t){this.methods=["on","once","after","before"],this.historySupport=!(!window.history||!window.history.pushState),n.call(this,t)};h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.prototype.init=function(t){var e,n=this;return this.handler=function(t){var e=t&&t.newURL||window.location.hash,r=n.history===!0?n.getPath():e.replace(/.*#/,"");n.dispatch("on","/"===r.charAt(0)?r:"/"+r)},o.init(this.handler,this.history),this.history===!1?r()&&t?i.hash=t:r()||n.dispatch("on","/"+i.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(e=r()&&t?t:r()?null:i.hash.replace(/^#/,""),e&&window.history.replaceState({},document.title,e)):e=this.getPath(),(e||this.run_in_init===!0)&&this.handler()),this},h.prototype.explode=function(){var t=this.history===!0?this.getPath():i.hash;return"/"===t.charAt(1)&&(t=t.slice(1)),t.slice(1,t.length).split("/")},h.prototype.setRoute=function(t,e,r){var n=this.explode();return"number"==typeof t&&"string"==typeof e?n[t]=e:"string"==typeof r?n.splice(t,e,s):n=[t],o.setHash(n.join("/")),n},h.prototype.insert=function(t,e,r,i){return"once"===t&&(t="on",r=function(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}(r)),n.prototype.insert.call(this,t,e,r,i)},h.prototype.getRoute=function(t){var e=t;if("number"==typeof t)e=this.explode()[t];else if("string"==typeof t){var r=this.explode();e=r.indexOf(t)}else e=this.explode();return e},h.prototype.destroy=function(){return o.destroy(this.handler),this},h.prototype.getPath=function(){var t=window.location.pathname;return"/"!==t.substr(0,1)&&(t="/"+t),t}},{"./router":2}],2:[function(t,e,r){function n(t){for(var e=[],r=0,n=t.length;n>r;r++)e=e.concat(t[r]);return e}function i(t,e){for(var r=0;r<t.length;r+=1)if(e(t[r],r,t)===!1)return}function o(t,e,r){if(!t.length)return r();var n=0;!function i(){e(t[n],function(e){e||e===!1?(r(e),r=function(){}):(n+=1,n===t.length?r():i())})}()}function s(t,e,r){r=t;for(var n in e)if(e.hasOwnProperty(n)&&(r=e[n](t),r!==t))break;return r===t?"([._a-zA-Z0-9-]+)":r}function h(t,e){for(var r,n=0,i="";r=t.substr(n).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)n=r.index+r[0].length,r[0]=r[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),i+=t.substr(0,r.index)+r[0];t=i+=t.substr(n);var o,h,a=t.match(/:([^\/]+)/gi);if(a){h=a.length;for(var c=0;h>c;c++)o=a[c],t="::"===o.slice(0,2)?o.slice(1):t.replace(o,s(o,e))}return t}function a(t,e,r,n){var i,o=0,s=0,h=0,r=(r||"(").toString(),n=(n||")").toString();for(i=0;i<t.length;i++){var a=t[i];if(a.indexOf(r,o)>a.indexOf(n,o)||~a.indexOf(r,o)&&!~a.indexOf(n,o)||!~a.indexOf(r,o)&&~a.indexOf(n,o)){if(s=a.indexOf(r,o),h=a.indexOf(n,o),~s&&!~h||!~s&&~h){var c=t.slice(0,(i||1)+1).join(e);t=[c].concat(t.slice((i||1)+1))}o=(h>s?h:s)+1,i=0}else o=0}return t}var c=/\?.*/,u=r.Router=function(t){this.params={},this.routes={},this.methods||(this.methods=["on","after","before"]),this.scope=[],this._methods={},this.configure(),this.mount(t||{})};u.prototype.configure=function(t){t=t||{};for(var e=0;e<this.methods.length;e++)this._methods[this.methods[e]]=!0;return this.recurse=t.recurse||this.recurse||!1,this.async=t.async||!1,this.delimiter=t.delimiter||"/",this.strict="undefined"==typeof t.strict?!0:t.strict,this.notfound=t.notfound,this.resource=t.resource,this.history=t.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&t.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&t.convert_hash_in_init!==!1,this.every={after:t.after||null,before:t.before||null,on:t.on||null},this},u.prototype.param=function(t,e){":"!==t[0]&&(t=":"+t);var r=new RegExp(t,"g");return this.params[t]=function(t){return t.replace(r,e.source||e)},this},u.prototype.on=u.prototype.route=function(t,e,r){var n=this;return r||"function"!=typeof e||(r=e,e=t,t="on"),Array.isArray(e)?e.forEach(function(e){n.on(t,e,r)}):(e.source&&(e=e.source.replace(/\\\//gi,"/")),Array.isArray(t)?t.forEach(function(t){n.on(t.toLowerCase(),e,r)}):(e=e.split(new RegExp(this.delimiter)),e=a(e,this.delimiter),void this.insert(t,this.scope.concat(e),r)))},u.prototype.path=function(t,e){var r=this.scope.length;t.source&&(t=t.source.replace(/\\\//gi,"/")),t=t.split(new RegExp(this.delimiter)),t=a(t,this.delimiter),this.scope=this.scope.concat(t),e.call(this,this),this.scope.splice(r,t.length)},u.prototype.dispatch=function(t,e,r){function n(){o.last=s.after,o.invoke(o.runlist(s),o,r)}var i,o=this,s=this.traverse(t,e.replace(c,""),this.routes,""),h=this._invoked;return this._invoked=!0,s&&0!==s.length?("forward"===this.recurse&&(s=s.reverse()),i=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],i&&i.length>0&&h?(this.async?this.invoke(i,this,n):(this.invoke(i,this),n()),!0):(n(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:t,path:e},r),!1)},u.prototype.runlist=function(t){var e=this.every&&this.every.before?[this.every.before].concat(n(t)):n(t);return this.every&&this.every.on&&e.push(this.every.on),e.captures=t.captures,e.source=t.source,e},u.prototype.invoke=function(t,e,r){var n,s=this;this.async?(n=function(r,i){return Array.isArray(r)?o(r,n,i):void("function"==typeof r&&r.apply(e,(t.captures||[]).concat(i)))},o(t,n,function(){r&&r.apply(e,arguments)})):(n=function(r){return Array.isArray(r)?i(r,n):"function"==typeof r?r.apply(e,t.captures||[]):void("string"==typeof r&&s.resource&&s.resource[r].apply(e,t.captures||[]))},i(t,n))},u.prototype.traverse=function(t,e,r,n,i){function o(t){function e(t){for(var r=[],n=0;n<t.length;n++)r[n]=Array.isArray(t[n])?e(t[n]):t[n];return r}function r(t){for(var e=t.length-1;e>=0;e--)Array.isArray(t[e])?(r(t[e]),0===t[e].length&&t.splice(e,1)):i(t[e])||t.splice(e,1)}if(!i)return t;var n=e(t);return n.matched=t.matched,n.captures=t.captures,n.after=t.after.filter(i),r(n),n}var s,h,a,c,u=[];if(e===this.delimiter&&r[t])return c=[[r.before,r[t]].filter(Boolean)],c.after=[r.after].filter(Boolean),c.matched=!0,c.captures=[],o(c);for(var f in r)if(r.hasOwnProperty(f)&&(!this._methods[f]||this._methods[f]&&"object"==typeof r[f]&&!Array.isArray(r[f]))){if(s=h=n+this.delimiter+f,this.strict||(h+="["+this.delimiter+"]?"),a=e.match(new RegExp("^"+h)),!a)continue;if(a[0]&&a[0]==e&&r[f][t])return c=[[r[f].before,r[f][t]].filter(Boolean)],c.after=[r[f].after].filter(Boolean),c.matched=!0,c.captures=a.slice(1),this.recurse&&r===this.routes&&(c.push([r.before,r.on].filter(Boolean)),c.after=c.after.concat([r.after].filter(Boolean))),o(c);if(c=this.traverse(t,e,r[f],s),c.matched)return c.length>0&&(u=u.concat(c)),this.recurse&&(u.push([r[f].before,r[f].on].filter(Boolean)),c.after=c.after.concat([r[f].after].filter(Boolean)),r===this.routes&&(u.push([r.before,r.on].filter(Boolean)),c.after=c.after.concat([r.after].filter(Boolean)))),u.matched=!0,u.captures=c.captures,u.after=c.after,o(u)}return!1},u.prototype.insert=function(t,e,r,n){var i,o,s,a,c;if(e=e.filter(function(t){return t&&t.length>0}),n=n||this.routes,c=e.shift(),/\:|\*/.test(c)&&!/\\d|\\w/.test(c)&&(c=h(c,this.params)),e.length>0)return n[c]=n[c]||{},this.insert(t,e,r,n[c]);if(c||e.length||n!==this.routes){if(o=typeof n[c],s=Array.isArray(n[c]),n[c]&&!s&&"object"==o)switch(i=typeof n[c][t]){case"function":return void(n[c][t]=[n[c][t],r]);case"object":return void n[c][t].push(r);case"undefined":return void(n[c][t]=r)}else if("undefined"==o)return a={},a[t]=r,void(n[c]=a);throw new Error("Invalid route context: "+o)}switch(i=typeof n[t]){case"function":return void(n[t]=[n[t],r]);case"object":return void n[t].push(r);case"undefined":return void(n[t]=r)}},u.prototype.extend=function(t){function e(t){n._methods[t]=!0,n[t]=function(){var e=1===arguments.length?[t,""]:[t];n.on.apply(n,e.concat(Array.prototype.slice.call(arguments)))}}var r,n=this,i=t.length;for(r=0;i>r;r++)e(t[r])},u.prototype.mount=function(t,e){function r(e,r){var i=e,o=e.split(n.delimiter),s=typeof t[e],h=""===o[0]||!n._methods[o[0]],c=h?"on":i;return h&&(i=i.slice((i.match(new RegExp("^"+n.delimiter))||[""])[0].length),o.shift()),h&&"object"===s&&!Array.isArray(t[e])?(r=r.concat(o),void n.mount(t[e],r)):(h&&(r=r.concat(i.split(n.delimiter)),r=a(r,n.delimiter)),void n.insert(c,r,t[e]))}if(t&&"object"==typeof t&&!Array.isArray(t)){var n=this;e=e||[],Array.isArray(e)||(e=e.split(n.delimiter));for(var i in t)t.hasOwnProperty(i)&&r(i,e.slice(0))}}},{}]},{},[1])(1)});